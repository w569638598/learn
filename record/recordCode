const recordBtn = document.querySelectorAll('.record')[0]
recordBtn.addEventListener('click', async ()=>{
  let stream = await navigator.mediaDevices.getDisplayMedia({
    video: true
  })
  const mime = MediaRecorder.isTypeSupported('video/webm; codecs=vp9')? 'video/webm; codecs=vp9' : 'video/webm';
  let mediaRecorder = new MediaRecorder(stream, {
    mime
  })
  let chunks = []
  mediaRecorder.addEventListener('dataavailable', e => {
    chunks.push(e.data)

  })
  mediaRecorder.addEventListener('stop', () => {
    let blob = new Blob(chunks, {
      type: chunks[0].type
    })
    const url = URL.createObjectURL(blob)
    let video = document.querySelectorAll('.video')[0];
    video.src = url
    
    const a = document.createElement("a")
    a.href = url;
    a.download = 'video.webm';
    a.innerText = 'download'
    document.body.appendChild(a)
    // a.click()
  })
  mediaRecorder.start()
})
